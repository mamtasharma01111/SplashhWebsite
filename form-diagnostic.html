<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FormSubmit Diagnostic</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 20px; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input, textarea { width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px; }
        button { background: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin-right: 10px; }
        button:hover { background: #0056b3; }
        .status { margin-top: 15px; padding: 10px; border-radius: 4px; }
        .success { background: #d4edda; color: #155724; border: 1px solid #c3e6cb; }
        .error { background: #f8d7da; color: #721c24; border: 1px solid #f5c6cb; }
        .loading { background: #d1ecf1; color: #0c5460; border: 1px solid #bee5eb; }
        .info { background: #e2e3e5; color: #383d41; border: 1px solid #d6d8db; }
        .log { background: #f8f9fa; border: 1px solid #dee2e6; padding: 15px; border-radius: 4px; margin-top: 20px; max-height: 300px; overflow-y: auto; }
        .log-entry { margin-bottom: 8px; padding: 5px; border-left: 3px solid #007bff; padding-left: 10px; }
        .log-error { border-left-color: #dc3545; }
        .log-success { border-left-color: #28a745; }
    </style>
</head>
<body>
    <h1>FormSubmit Diagnostic Tool</h1>
    <p>This tool will help identify what's causing the "Whoops, looks like something went wrong" error.</p>
    
    <div class="test-section">
        <h3>Step 1: Check FormSubmit Service Status</h3>
        <button onclick="checkFormSubmitStatus()">Check FormSubmit Status</button>
        <div id="statusCheck"></div>
    </div>
    
    <div class="test-section">
        <h3>Step 2: Test Different FormSubmit URLs</h3>
        <p>Try these different FormSubmit configurations to see which one works:</p>
        
        <h4>Test A: Standard FormSubmit</h4>
        <form id="testA" action="https://formsubmit.co/splashhresorts@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_subject" value="Test A - Standard">
            <div class="form-group">
                <label>Name:</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Message:</label>
                <textarea name="message" rows="2" required>Test message from diagnostic tool</textarea>
            </div>
            <button type="submit">Test Standard URL</button>
        </form>
        
                 <h4>Test B: Confirmed Email</h4>
         <form id="testB" action="https://formsubmit.co/splashhresorts@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_subject" value="Test B - Confirmed">
            <div class="form-group">
                <label>Name:</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Message:</label>
                <textarea name="message" rows="2" required>Test message from diagnostic tool</textarea>
            </div>
            <button type="submit">Test Confirmed URL</button>
        </form>
        
                 <h4>Test C: With Redirect</h4>
         <form id="testC" action="https://formsubmit.co/splashhresorts@gmail.com" method="POST">
            <input type="hidden" name="_captcha" value="false">
            <input type="hidden" name="_subject" value="Test C - With Redirect">
            <input type="hidden" name="_next" value="https://httpbin.org/status/200">
            <div class="form-group">
                <label>Name:</label>
                <input type="text" name="name" required>
            </div>
            <div class="form-group">
                <label>Message:</label>
                <textarea name="message" rows="2" required>Test message from diagnostic tool</textarea>
            </div>
            <button type="submit">Test With Redirect</button>
        </form>
    </div>
    
    <div class="test-section">
        <h3>Step 3: Check Browser Console</h3>
        <p>Open Developer Tools (F12) and check the Console tab for any error messages when submitting forms.</p>
        <button onclick="showConsoleInstructions()">Show Console Instructions</button>
        <div id="consoleInstructions"></div>
    </div>
    
    <div class="test-section">
        <h3>Step 4: Test Network Requests</h3>
        <p>Check the Network tab in Developer Tools to see if the form submission is reaching FormSubmit.</p>
        <button onclick="testNetworkRequest()">Test Network Request</button>
        <div id="networkTest"></div>
    </div>
    
    <div class="test-section">
        <h3>Diagnostic Log</h3>
        <div id="diagnosticLog" class="log"></div>
        <button onclick="clearLog()">Clear Log</button>
    </div>
    
    <script>
        function log(message, type = 'info') {
            const logDiv = document.getElementById('diagnosticLog');
            const timestamp = new Date().toLocaleTimeString();
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `<strong>${timestamp}</strong>: ${message}`;
            logDiv.appendChild(logEntry);
            logDiv.scrollTop = logDiv.scrollHeight;
        }
        
        function clearLog() {
            document.getElementById('diagnosticLog').innerHTML = '';
        }
        
        function checkFormSubmitStatus() {
            const statusDiv = document.getElementById('statusCheck');
            statusDiv.innerHTML = '<div class="status loading">Checking FormSubmit status...</div>';
            
            // Test if FormSubmit is accessible
            fetch('https://formsubmit.co/status', { mode: 'no-cors' })
                .then(() => {
                    statusDiv.innerHTML = '<div class="status success">FormSubmit service is accessible</div>';
                    log('FormSubmit service is accessible', 'success');
                })
                .catch(() => {
                    statusDiv.innerHTML = '<div class="status error">FormSubmit service may be down or blocked</div>';
                    log('FormSubmit service may be down or blocked', 'error');
                });
        }
        
        function showConsoleInstructions() {
            const instructionsDiv = document.getElementById('consoleInstructions');
            instructionsDiv.innerHTML = `
                <div class="status info">
                    <h4>How to check Console:</h4>
                    <ol>
                        <li>Press F12 to open Developer Tools</li>
                        <li>Click on the "Console" tab</li>
                        <li>Submit one of the test forms above</li>
                        <li>Look for any red error messages</li>
                        <li>Copy any error messages you see</li>
                    </ol>
                </div>
            `;
        }
        
        function testNetworkRequest() {
            const networkDiv = document.getElementById('networkTest');
            networkDiv.innerHTML = '<div class="status loading">Testing network request...</div>';
            
            // Test a simple fetch to FormSubmit
            fetch('https://formsubmit.co/splashhresorts@gmail.com', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: 'name=Test&message=Network test'
            })
            .then(response => {
                networkDiv.innerHTML = `<div class="status success">Network request successful. Status: ${response.status}</div>`;
                log(`Network request successful. Status: ${response.status}`, 'success');
            })
            .catch(error => {
                networkDiv.innerHTML = `<div class="status error">Network request failed: ${error.message}</div>`;
                log(`Network request failed: ${error.message}`, 'error');
            });
        }
        
        // Add form submission logging
        document.querySelectorAll('form').forEach(form => {
            form.addEventListener('submit', function(e) {
                const formId = this.id;
                log(`Form ${formId} submitted`, 'info');
                console.log(`Form ${formId} submitted to:`, this.action);
            });
        });
        
        // Initialize
        window.addEventListener('load', function() {
            log('Diagnostic tool loaded', 'info');
            log('Try submitting the test forms above to see what happens', 'info');
        });
    </script>
</body>
</html>
